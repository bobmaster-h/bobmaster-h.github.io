<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>video of free</title>

<style>
body {
    background:#000;
    color:#fff;
    font-family:Arial;
    margin:0;
    padding:20px;
    text-align:center;
}
#player {
    width:90vw;
    max-width:1200px;
    border:2px solid #333;
}
.controls {
    margin-top:20px;
}
#playlist {
    list-style:none;
    padding:0;
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:10px;
}
#playlist li {
    background:#222;
    padding:10px 14px;
    border-radius:6px;
    cursor:pointer;
}
#playlist li.active {
    background:#444;
}
select,label {
    margin:8px;
}
.platform {
    font-size:0.8em;
    opacity:0.7;
}
</style>
</head>

<body>

<h1>video of free</h1>
<div id="current-title">video.1</div>

<video id="player" controls autoplay loop>
    <source src="/TG-2025-05-09-225147363.mp4" type="video/mp4">
</video>

<div class="controls">

<label>
<input type="checkbox" id="externalMode">
 平台浏览模式（YouTube / TikTok / 抖音 / B站）
</label>

<br>

<select id="mode-select">
    <option value="single-loop">单视频循环</option>
    <option value="sequential">顺序播放</option>
    <option value="random">随机播放</option>
</select>

<ul id="playlist">
    <!-- 本地 -->
    <li data-type="local" data-src="/TG-2025-05-09-225147363.mp4">
        video.1 <span class="platform">LOCAL</span>
    </li>

    <!-- YouTube -->
    <li data-type="youtube" data-url="https://www.youtube.com/watch?v=VIDEO_ID">
        video.YouTube <span class="platform">YT</span>
    </li>

    <!-- TikTok -->
    <li data-type="tiktok" data-url="https://www.tiktok.com/@user/video/123">
        video.TikTok <span class="platform">TT</span>
    </li>

    <!-- 抖音 -->
    <li data-type="douyin" data-url="https://www.douyin.com/video/123">
        video.抖音 <span class="platform">DY</span>
    </li>

    <!-- Bilibili -->
    <li data-type="bilibili" data-url="https://www.bilibili.com/video/BVxxxx">
        video.Bilibili <span class="platform">BILI</span>
    </li>
</ul>

</div>

<script>
const video = document.getElementById('player');
const title = document.getElementById('current-title');
const items = document.querySelectorAll('#playlist li');
const externalMode = document.getElementById('externalMode');
const modeSelect = document.getElementById('mode-select');

let currentIndex = 0;

items.forEach((li,index)=>{
    li.addEventListener('click',()=>{
        playItem(index);
    });
});

function playItem(index){
    const item = items[index];
    const type = item.dataset.type;

    items.forEach(i=>i.classList.remove('active'));
    item.classList.add('active');

    title.textContent = item.textContent.trim();
    currentIndex = index;

    if (externalMode.checked && type !== 'local') {
        window.open(item.dataset.url, '_blank');
        return;
    }

    if (type === 'local') {
        video.src = item.dataset.src;
        video.play();
    }
}

video.addEventListener('ended',()=>{
    if (modeSelect.value === 'single-loop') {
        video.play();
    } else {
        let next = currentIndex + 1;
        if (modeSelect.value === 'random') {
            next = Math.floor(Math.random()*items.length);
        }
        if (next >= items.length) next = 0;
        playItem(next);
    }
});
</script>

</body>
</html>
